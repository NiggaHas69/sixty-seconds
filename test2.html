<!doctype html>
<html>


  <head>
    <meta charset="UTF-8" />
    <title>Sixty Seconds</title>
  </head>


  <body>
    <section>


      <div>
        <canvas id="canvas" width="1200" height=" 600">
          This text is displayed if your browser does not support HTML5 Canvas.
        </canvas>
      </div>


      <script type="text/javascript">
        var dx = 3;
        var dy = 3;
        var x = 150;
        var y = 150;
        var contX1 = 10;
        var contX2 = 405;
        var contY1 = 10;
        var contY2 = 405;
        var WIDTH = contX2 - contX1;
        var HEIGHT = contY2 - contY1;
        var FLAG = 0;
        var collided=false;
        var resources =new Array();
        var resource_count = 0;
        var oxy =new Image();
        oxy.src ="oxygen.jpg";
        var water=new Image();
        water.src ="water.jpg";
        for(var i=0;i<6;i++)
        {resources[i]= oxy ;
          i++;
         resources[i] = water;
        }
        var rx =new Array(); //array of x coordiantes of resources
        rx.push(260);rx.push(220);rx.push(20);rx.push(90);
        var ry =new Array();
        ry.push(100);ry.push(240);ry.push(280);ry.push(340);

resource_count=resources.length;


function keyInput(evt) {

for(var i=0;i<rx.length;i++)
{
aBoxLeft=x-8;
aBoxRight=x+8;
aBoxTop=y-8;
aBoxBottom=y+5;

bBoxLeft=rx[i]-15;
bBoxRight=rx[i]+25;
bBoxTop=ry[i]-5;
bBoxBottom=ry[i]+28;

intersects( aBoxLeft,  aBoxRight,  aBoxTop,  aBoxBottom, 
                           bBoxLeft,  bBoxRight,  bBoxTop,  bBoxBottom);
if(collided)
{
   remove(i);
   collided=false;
}
}
function remove(i){

   resources.splice(i,1);
                    rx.splice(i,1);
                    ry.splice(i,1);
                    resource_count --;

}

function intersects( aBoxLeft,  aBoxRight,  aBoxTop,  aBoxBottom, 
                           bBoxLeft,  bBoxRight,  bBoxTop,  bBoxBottom) {

   if( bBoxRight >= aBoxLeft && bBoxBottom >= aBoxTop && aBoxRight >= bBoxLeft && aBoxBottom >= bBoxTop)
            collided = true;
}
       switch (evt.keyCode) {
      case 38:  /* Up arrow was pressed */
{    FLAG=0;                                    //Reset FLAG
if(40<x && x<183)
{
if (y - 10<178 && y>=178)
{  y=183;
FLAG=1;     }
if (y - 10<208 && y>=208)
{  y=213; 
FLAG=1;    }
}
if(213<x && x<365)
{
if (y - 10<178 && y>=178)
{  y=183;
FLAG=1;     }
if (y - 10<208 && y>=208)
{  y=213; 
FLAG=1;    }
}

if (FLAG==0 && y - dy > contY1+6){
y -= dy;
}}
break;

            case 40: /* Down arrow was pressed */
{
FLAG=0;                                    //Reset FLAG
if(40<x && x<183)
{ if(y+10 > 178 && y<= 178)
  {y=173;
  FLAG=1;}
  if (y + 10 > 208 && y<=208)
{  y=203; 
FLAG=1;    }
}
if(213<x && x<=365)
{
if (y + 10 >178 && y<=178)
{  y =173 ;
FLAG=1;     }
if (y +10>208 && y<=208)
{  y=203; 
FLAG=1;    }
}
if (FLAG==0 && y + dy <= contY2){
y += dy;
}
}
break;
            case 37:
              /* Left arrow was pressed */
              {
                FLAG = 0; //Reset FLAG
                if (40 < y && y < 178) { 
                  if (x - 10 < 183 && x >= 183) {
                    x = 188;
                    FLAG = 1;
                    
                  }
                  if (x - 10 < 213 && x >= 213) {
                    x = 218;
                    FLAG = 1;
                    
                  }
                }
                if (208 < y && y < 365) { 
                  if (x - 10 < 213 && x >= 213) {
                    x = 218;
                    FLAG = 1;
                    
                  }
                  if (x - 10 < 183 && x >= 183) {
                    x = 188;
                    FLAG = 1;
                    
                  }
                }
                if (FLAG == 0 && x - dx > contX1 + 6) {
                  x -= dx;
                }
              }
              break;
            case 39:
              /* Right arrow was pressed */ {
                FLAG = 0; //Reset FLAG
                if (40 < y && y < 178) { 
                  if (x + 10 > 183 && x <= 183) {
                    x = 178;
                    FLAG = 1;
                    
                  }
                  if (x + 10 > 213 && x <= 213) {
                    x = 208;
                    FLAG = 1;
                    
                  }
                }
                if (208 < y && y < 365) { 
                  if (x + 10 > 213 && x <= 213) {
                    x = 208;
                    FLAG = 1;
                    
                  }
                  if (x + 10 > 183 && x <= 183) {
                    x = 178;
                    FLAG = 1;
                    
                  }
                }
                if (FLAG == 0 && x + dx <= WIDTH) {
                  x += dx;
                }
              }
              break;
          }// switch closes here
                
        }//function keyinput ends here


        function init() {
          var ctx = document.getElementById('canvas').getContext('2d');
          function player(x, y, r) {
            ctx.clearRect(10, 10, 400, 400)
            ctx.beginPath();
            ctx.arc(x, y, r, 0, Math.PI * 2, true);
            ctx.fill();
          }
          function draw() {
            player(x, y, 5);
            ctx.lineWidth = "6";
            ctx.strokeRect(contX1, contY1, WIDTH, HEIGHT);
            ctx.stroke();
            ctx.lineWidth = "3";
            ctx.beginPath();
            ctx.moveTo(183, 40);
            ctx.lineTo(183, 178);
            ctx.lineTo(40, 178);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(213, 40);
            ctx.lineTo(213, 178);
            ctx.lineTo(365, 178);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(40, 208);
            ctx.lineTo(183, 208);
            ctx.lineTo(183, 365);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(213, 365);
            ctx.lineTo(213, 208);
            ctx.lineTo(365, 208);
            ctx.stroke();
            /*ctx.beginPath();
            ctx.moveTo(10, 193);
            ctx.lineTo(190, 193);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(207, 193);
            ctx.lineTo(405, 193);
            ctx.stroke();
            */
            for (var i =0 ;i< resource_count;i++)
            ctx.drawImage(resources[i],rx[i],ry[i],30,30);
            
          
            requestAnimationFrame(draw);
          }
          setInterval(draw(),33);
        }
        window.onload = init();
        window.addEventListener('keydown', keyInput, true);

        //objective 3 starts here
      </script>
  </body>


</html>
